[
    {
        "$class": "util",
        "$method": "set",
        "name": ["job_id", "channel"],
        "value": ["{$message}", "{$channel}"],
        "$set": "cancel_data"
    },
    {
        "$class": "job",
        "name": "cancel-atm_device_event",
        "title": "Canceled By User",
        "data": "{$cancel_data}",
        "$set": "cancel_job"
    },
    {
        "$function":"match",
        "$origin":"{$channel}",
        "$args": [ "[^.]*[^.]$" ],
        "$set": "matched"
    },
    {
        "if": "{$matched}",
        "$function":"shift",
        "$origin":"{$matched}",
        "$set": "eventId"
    },
    {
        "$class": "job",
        "$method": "log",
        "job": "{$job}",
        "format": "cancel job: %s",
        "args": [ "{$cancel_job}" ]
    },
    {
        "$class": "atm_event",
        "$method": "update",
        "eventId":"{$eventId}",
        "estate": "stopped",
        "status": "fixed"
    }
]